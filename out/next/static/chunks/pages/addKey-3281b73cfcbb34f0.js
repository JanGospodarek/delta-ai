(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[192],{192:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/addKey",function(){return a(8291)}])},7038:function(e,t,a){"use strict";var n=a(7536),r=a(7294);let l=(e,t)=>!t||e.length>0,s=e=>{let{name:t,control:a,required:s}=e,i=(0,r.useRef)(null),[u,c]=(0,r.useState)(!1),{field:o,fieldState:{invalid:d}}=(0,n.bc)({name:t,control:a,rules:{required:!0,validate:e=>l(e,s)}});return(0,r.useEffect)(()=>{i.current&&i.current.addEventListener("change",e=>{let t=e.target.value,a=l(t,s);c(!a)})},[]),(0,r.useEffect)(()=>{c(d)},[d]),{inputRef:i,field:o,invalid:u}};t.Z=s},4704:function(e,t,a){"use strict";var n=a(1354),r=a.n(n),l=a(4947);let s=()=>{let e=(e,t)=>{let a=r().AES.encrypt(e,t).toString();localStorage.setItem(l.U,a)},t=e=>{let t=localStorage.getItem(l.U),a=r().AES.decrypt(t,e),n=a.toString(r().enc.Utf8);if(!n)throw Error("Błędne hasło autoryzacyjne");return n};return{encryptAndSave:e,decryptAndRead:t}};t.Z=s},4947:function(e,t,a){"use strict";a.d(t,{U:function(){return n}});let n="deltaAIKey"},8291:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var n=a(5893),r=a(7294),l=a(2899),s=a(2635),i=a(7536),u=a(4704),c=a(7038);let o=e=>{let{open:t,setOpen:a,message:l}=e,[s,i]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{if(t){i(!0);let e=setTimeout(()=>{i(!1);let e=setTimeout(()=>{a(!1)},200);return()=>clearTimeout(e)},2e3);return()=>clearTimeout(e)}},[t,a]),t)?(0,n.jsx)("div",{className:"success-overlay",style:{opacity:s?1:0},children:(0,n.jsx)("p",{className:"text-2xl text-white  font-bold ",children:l})}):null},d=e=>"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=".concat(e);var f=a(5007),m=a(7626);let p=()=>{let e=(0,f.I0)(),[t,a]=(0,r.useState)(!1),n=async(t,n)=>{a(!0);let r=await fetch(d(null!=n?n:""),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(a(!1),!r.ok)return null;let l=await r.json();return e((0,m.j1)(l.modelVersion)),l};return{post:n,loading:t}};var h=a(1163);let x=()=>{let e=(0,h.useRouter)(),t=(0,f.I0)(),{encryptAndSave:a}=(0,u.Z)(),{post:d,loading:x}=p(),[y,v]=(0,r.useState)(!1),[g,j]=(0,r.useState)(!1),{control:w,trigger:N}=(0,i.cI)({defaultValues:{apiKey:"",password:""}}),{field:S,inputRef:E,invalid:b}=(0,c.Z)({name:"apiKey",control:w,required:!0}),{field:k,inputRef:z,invalid:_}=(0,c.Z)({name:"password",control:w,required:!0}),I=async n=>{n.preventDefault();let r=await N();if(!r)return;let l=await d({contents:[{parts:[{text:"This is a test if everything works!"}]}]},S.value);if(!l){j(!0);return}a(S.value,k.value),t((0,m.Lb)(S.value)),t((0,m.Zc)(!0)),v(!0),j(!1),setTimeout(()=>{e.push("/")},2e3)};return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("p",{className:"text-sm",children:"Podaj klucz API Gemini"}),(0,n.jsxs)("form",{onSubmit:I,className:"flex flex-col gap-2 items-center mt-3",children:[(0,n.jsx)(l.Y,{label:"Klucz API",...S,ref:E,color:b||g?"danger":"default"}),(0,n.jsx)(l.Y,{label:"Hasło autoryzacyjne",...k,ref:z,color:_?"danger":"default"}),(0,n.jsx)(s.A,{color:"primary",type:"submit",isLoading:x,children:"Zapisz"}),g&&(0,n.jsx)("p",{className:"text-red-600 font-semibold text-center",children:"Napotkaliśmy problem podczas sprawdzania klucza API! Sprawdź czy jest on poprawny!"}),(0,n.jsx)(o,{open:y,setOpen:v,message:"Klucz zapisany \uD83D\uDE0E"})]})]})},y=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{className:"text-xl text-center mt-3",children:"Nie wykryliśmy klucza API!"}),(0,n.jsx)("div",{className:"mx-7 mt-3",children:(0,n.jsx)(x,{})})]}),v=()=>(0,n.jsx)("div",{children:(0,n.jsx)(y,{})});var g=v},2480:function(){}},function(e){e.O(0,[513,774,888,179],function(){return e(e.s=192)}),_N_E=e.O()}]);