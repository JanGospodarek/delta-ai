(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[192],{192:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/addKey",function(){return a(8291)}])},7038:function(e,t,a){"use strict";var n=a(7536),r=a(7294);let s=(e,t)=>!t||e.length>0,l=e=>{let{name:t,control:a,required:l}=e,i=(0,r.useRef)(null),[u,c]=(0,r.useState)(!1),{field:o,fieldState:{invalid:d}}=(0,n.bc)({name:t,control:a,rules:{required:!0,validate:e=>s(e,l)}});return(0,r.useEffect)(()=>{i.current&&i.current.addEventListener("change",e=>{let t=e.target.value,a=s(t,l);c(!a)})},[]),(0,r.useEffect)(()=>{c(d)},[d]),{inputRef:i,field:o,invalid:u}};t.Z=l},4704:function(e,t,a){"use strict";var n=a(1354),r=a.n(n),s=a(4947);let l=()=>{let e=(e,t)=>{let a=r().AES.encrypt(e,t).toString();localStorage.setItem(s.U,a)},t=e=>{let t=localStorage.getItem(s.U),a=r().AES.decrypt(t,e),n=a.toString(r().enc.Utf8);if(!n)throw Error("Błędne hasło autoryzacyjne");return n};return{encryptAndSave:e,decryptAndRead:t}};t.Z=l},4947:function(e,t,a){"use strict";a.d(t,{U:function(){return n}});let n="deltaAIKey"},8291:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var n=a(5893),r=a(7294),s=a(7057),l=a(2635),i=a(7536),u=a(4704),c=a(7038);let o=e=>{let{open:t,setOpen:a,message:s}=e,[l,i]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{if(t){i(!0);let e=setTimeout(()=>{i(!1);let e=setTimeout(()=>{a(!1)},200);return()=>clearTimeout(e)},2e3);return()=>clearTimeout(e)}},[t,a]),t)?(0,n.jsx)("div",{className:"success-overlay",style:{opacity:l?1:0},children:(0,n.jsx)("p",{className:"text-2xl text-white  font-bold ",children:s})}):null},d=e=>"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=".concat(e),f=()=>{let[e,t]=(0,r.useState)(!1),a=async(e,a)=>{t(!0);let n=await fetch(d(null!=a?a:""),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return(t(!1),n.ok)?n.json():null};return{post:a,loading:e}};var m=a(5007),p=a(7626),h=a(1163);let x=()=>{let e=(0,h.useRouter)(),t=(0,m.I0)(),{encryptAndSave:a}=(0,u.Z)(),{post:d,loading:x}=f(),[y,v]=(0,r.useState)(!1),[g,j]=(0,r.useState)(!1),{control:w,trigger:N}=(0,i.cI)({defaultValues:{apiKey:"",password:""}}),{field:S,inputRef:E,invalid:b}=(0,c.Z)({name:"apiKey",control:w,required:!0}),{field:k,inputRef:z,invalid:_}=(0,c.Z)({name:"password",control:w,required:!0}),T=async n=>{n.preventDefault();let r=await N();if(!r)return;let s=await d({contents:[{parts:[{text:"This is a test if everything works!"}]}]},S.value);if(!s){j(!0);return}a(S.value,k.value),t((0,p.Lb)(S.value)),t((0,p.Zc)(!0)),v(!0),j(!1),setTimeout(()=>{e.push("/")},2e3)};return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("p",{className:"text-sm",children:"Podaj klucz API Gemini"}),(0,n.jsxs)("form",{onSubmit:T,className:"flex flex-col gap-2 items-center mt-3",children:[(0,n.jsx)(s.Y,{label:"Klucz API",...S,ref:E,color:b||g?"danger":"default"}),(0,n.jsx)(s.Y,{label:"Hasło autoryzacyjne",...k,ref:z,color:_?"danger":"default"}),(0,n.jsx)(l.A,{color:"primary",type:"submit",isLoading:x,children:"Zapisz"}),g&&(0,n.jsx)("p",{className:"text-red-600 font-semibold text-center",children:"Napotkaliśmy problem podczas sprawdzania klucza API! Sprawdź czy jest on poprawny!"}),(0,n.jsx)(o,{open:y,setOpen:v,message:"Klucz zapisany \uD83D\uDE0E"})]})]})},y=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{className:"text-xl text-center mt-3",children:"Nie wykryliśmy klucza API!"}),(0,n.jsx)("div",{className:"mx-7 mt-3",children:(0,n.jsx)(x,{})})]}),v=()=>(0,n.jsx)("div",{children:(0,n.jsx)(y,{})});var g=v},2480:function(){}},function(e){e.O(0,[524,774,888,179],function(){return e(e.s=192)}),_N_E=e.O()}]);